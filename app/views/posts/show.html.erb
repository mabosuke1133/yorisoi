<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      
      <%# --- ÊäïÁ®ø„É°„Ç§„É≥ÈÉ®ÂàÜ --- %>
      <div class="card shadow-sm border-0 rounded-lg overflow-hidden mb-4">
        <% if @post.image.attached? %>
          <%= image_tag @post.image, class: "card-img-top", style: "height: 400px; object-fit: cover;" %>
        <% end %>
        
        <div class="card-body p-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h1 class="h3 font-weight-bold mb-0"><%= @post.title %></h1>
            <span class="badge badge-info p-2">ÊÑüÊÉÖ„É¨„Éô„É´: <%= @post.emotion_level %></span>
          </div>

          <p class="text-muted mb-4" style="line-height: 1.8;">
            <%= @post.body %>
          </p>

          <div class="d-flex justify-content-between align-items-center border-top pt-3">
            <div class="text-muted small">
              ÊäïÁ®øËÄÖ: <%= link_to @post.user.name, user_path(@post.user), class: "font-weight-bold text-success" %>
            </div>
            
            <div>
              <% if @post.user == current_user %>
                <%= link_to 'Á∑®ÈõÜ', edit_post_path(@post), class: "btn btn-outline-secondary btn-sm" %>
                <%= link_to 'ÂâäÈô§', confirm_post_path(@post), class: "btn btn-outline-danger btn-sm" %>
              <% end %>
            </div>
          </div>
        </div>
      </div>

      <%= link_to '‚Üê „Çø„Ç§„É†„É©„Ç§„É≥„Å´Êàª„Çã', posts_path, class: "text-muted mb-5 d-block" %>

      <hr class="my-5">

      <%# --- „Ç≥„É°„É≥„Éà‰∏ÄË¶ßÈÉ®ÂàÜ --- %>
      <h4 class="mb-4"><i class="far fa-comments text-success"></i> ÂØÑ„ÇäÊ∑ª„ÅÑ„É°„ÉÉ„Çª„Éº„Ç∏Ôºà<%= @post.post_comments.count %>‰ª∂Ôºâ</h4>
      
      <div class="comments-section mb-5">
        <% @post.post_comments.each do |post_comment| %>
          <%# üí°„ÄåÁ∑ë„ÅÆ„É©„Ç§„É≥„Äç„ÅÆ„Éá„Ç∂„Ç§„É≥„Åß„ÅôÔºÅ %>
          <div class="p-3 mb-3 bg-white rounded-lg shadow-sm" style="border-left: 5px solid #88b04b;">
            <p class="mb-2"><%= post_comment.comment %></p>
            
            <div class="d-flex justify-content-between align-items-center">
              <small class="text-muted">
                <strong><%= link_to post_comment.user.name, user_path(post_comment.user), class: "text-success" %></strong> „Åï„Çì 
                <span class="ml-2"><%= post_comment.created_at.strftime('%Y/%m/%d %H:%M') %></span>
              </small>

              <% if post_comment.user == current_user %>
                <%= link_to "ÂâäÈô§", post_post_comment_path(@post, post_comment), method: :delete, data: { confirm: 'Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü' }, class: "text-danger small" %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>

      <%# --- „Ç≥„É°„É≥„ÉàÊäïÁ®ø„Éï„Ç©„Éº„É† --- %>
      <div class="new-comment bg-light p-4 rounded-lg shadow-sm mb-5">
        <%= form_with model: [@post, PostComment.new], local: true do |f| %>
          <div class="form-group">
            <%= f.label :comment, "ÂØÑ„ÇäÊ∑ª„ÅÑ„ÅÆ„Ç≥„É°„É≥„Éà„ÇíÈÄÅ„Çã", class: "font-weight-bold" %>
            <%= f.text_area :comment, rows: '3', placeholder: "„Åì„Åì„Å´„Ç≥„É°„É≥„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ", class: "form-control border-0 shadow-sm" %>
          </div>
          <div class="text-right">
            <%= f.submit "ÈÄÅ‰ø°„Åô„Çã", class: "btn btn-success px-4 rounded-pill shadow-sm" %>
          </div>
        <% end %>
      </div>

    </div>
  </div>
</div>