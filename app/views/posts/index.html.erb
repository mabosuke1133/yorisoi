<div class="container mt-4">
  <%# ヘッダー部分 %>
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="font-weight-bold text-success">寄り添いタイムライン</h1>
    <span class="badge badge-pill badge-light text-muted">全 <%= @posts.count %> 件の投稿</span>
  </div>

  <%# 🔍 検索フォーム：中央寄せ・白背景・丸みのあるデザイン %>
  <div class="search_form mb-5 p-4 bg-white rounded shadow-sm border text-center">
    <p class="small text-muted mb-3"><i class="fas fa-search"></i> 気になるキーワードで投稿を探してみましょう</p>
    <%= form_with url: posts_path, method: :get, local: true, class: "form-inline justify-content-center" do |f| %>
      <%= f.text_field :keyword, value: params[:keyword], class: "form-control mr-sm-2 rounded-pill w-50", placeholder: "キーワードを入力..." %>
      <%= f.submit "検索", class: "btn btn-success rounded-pill px-4 shadow-sm" %>
    <% end %>
  </div>

  <%# 投稿カード一覧 %>
  <div class="row">
    <% @posts.each do |post| %>
      <div class="col-md-6 col-lg-4 mb-4">
        <%# 💡 カード全体のデザイン：shadow-smで少し浮かせる %>
        <div class="card h-100 shadow-sm border-0 rounded-lg overflow-hidden">
          
          <%# 画像部分 %>
          <div class="post-image-container bg-light text-center">
            <% if post.image.attached? %>
              <%= image_tag post.image, class: "card-img-top", style: "height: 200px; object-fit: cover;" %>
            <% else %>
              <div class="py-5 text-muted"><i class="fas fa-image"></i> 画像なし</div>
            <% end %>
          </div>

          <div class="card-body">
            <%# 感情レベルをタグのように表示 %>
            <div class="mb-2">
              <span class="badge badge-info">感情レベル: <%= post.emotion_level %></span>
            </div>
            
            <h5 class="card-title font-weight-bold text-dark mb-1">
              <%= post.title %>
            </h5>
            
            <p class="text-muted small mb-3">
              <i class="fas fa-user"></i> <%= post.user.name %> さん
            </p>
          </div>

          <div class="card-footer bg-white border-0 d-flex justify-content-between align-items-center pb-3">
            <span class="small text-muted">
              <i class="far fa-comment-dots"></i> 寄り添い数: <%= post.post_comments.count %>
            </span>
            <%= link_to '詳細を見る', post_path(post), class: 'btn btn-outline-success btn-sm rounded-pill px-3' %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>